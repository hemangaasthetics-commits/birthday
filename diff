<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Sristi</title>

<style>
body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:linear-gradient(135deg,#ff758c,#ff7eb3);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    color:white;
}

.page{
    display:none;
    text-align:center;
    animation:fade 1s;
}
.page.active{display:block;}

h1{font-size:3rem;}
button{
    padding:12px 28px;
    border:none;
    border-radius:30px;
    background:#ff2e63;
    color:white;
    font-size:1rem;
    cursor:pointer;
    box-shadow:0 5px 15px rgba(0,0,0,.3);
}

button:hover{background:#ff1744;}

@keyframes fade{
    from{opacity:0;transform:translateY(20px)}
    to{opacity:1;transform:translateY(0)}
}

/* Cake */
.cake{
    position:relative;
    width:260px;
    height:160px;
    background:#ffc857;
    border-radius:0 0 25px 25px;
    margin:40px auto;
    box-shadow:inset 0 -25px #ff9f1c;
}
.cake::before{
    content:'';
    position:absolute;
    top:-40px;
    width:100%;
    height:40px;
    background:#ffe29a;
    border-radius:25px 25px 0 0;
}

/* Candles */
.candle{
    position:absolute;
    width:18px;
    height:55px;
    background:white;
    border-radius:5px;
}
.flame{
    position:absolute;
    top:-15px;
    left:50%;
    transform:translateX(-50%);
    width:14px;
    height:14px;
    background:orange;
    border-radius:50%;
    box-shadow:0 0 15px orange;
    animation:flicker .3s infinite;
}

@keyframes flicker{
    0%{transform:translateX(-50%) scale(1)}
    50%{transform:translateX(-50%) scale(1.2)}
    100%{transform:translateX(-50%) scale(1)}
}

/* Number 1 */
.one .c1{left:90px;top:-80px}

/* Number 7 */
.seven .c1{left:130px;top:-80px}
.seven .c2{left:150px;top:-80px}
.seven .c3{left:170px;top:-80px}
.seven .c4{left:160px;top:-50px}
.seven .c5{left:150px;top:-20px}

.note{
    display:none;
    font-size:1.4rem;
    margin-top:20px;
}
</style>
</head>

<body>

<!-- MUSIC -->
<audio id="bgMusic" loop>
    <!-- Replace with your own song -->
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_8c8a4f61c7.mp3" type="audio/mpeg">
</audio>

<!-- PAGE 1 -->
<div class="page active" id="p1">
    <h1>ğŸ‰ Happy Birthday Sristi ğŸ‰</h1>
    <button onclick="go(2)">Next ğŸ’–</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="p2">
    <h1>Blow the Candles ğŸ‚</h1>

    <div class="cake">
        <!-- 1 -->
        <div class="one">
            <div class="candle c1"><div class="flame"></div></div>
        </div>

        <!-- 7 -->
        <div class="seven">
            <div class="candle c1"><div class="flame"></div></div>
            <div class="candle c2"><div class="flame"></div></div>
            <div class="candle c3"><div class="flame"></div></div>
            <div class="candle c4"><div class="flame"></div></div>
            <div class="candle c5"><div class="flame"></div></div>
        </div>
    </div>

    <p>Blow into your microphone ğŸ’¨</p>

    <div class="note" id="note">
        ğŸˆ Happy 17th Birthday Mommy ğŸˆ
        <br><br>
        <button onclick="go(3)">Next ğŸ’Œ</button>
    </div>
</div>

<!-- PAGE 3 -->
<div class="page" id="p3">
    <h1>ğŸ’– For You ğŸ’–</h1>
    <p style="max-width:420px;margin:auto;font-size:1.2rem">
        <!-- ğŸ’Œ CUSTOM MESSAGE -->
        Happy Birthday my love.  
        Watching you grow, smile and dream makes me so proud.  
        You are my happiness, my peace, my everything.  
        I promise to love you today, tomorrow, and always â¤ï¸
    </p>
</div>

<script>
let audioStarted=false;

function go(n){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById('p'+n).classList.add('active');

    if(!audioStarted){
        document.getElementById('bgMusic').play();
        audioStarted=true;
    }

    if(n===2) startMic();
}

function startMic(){
    navigator.mediaDevices.getUserMedia({audio:true})
    .then(stream=>{
        const ctx=new AudioContext();
        const mic=ctx.createMediaStreamSource(stream);
        const analyser=ctx.createAnalyser();
        mic.connect(analyser);
        analyser.fftSize=256;

        const data=new Uint8Array(analyser.frequencyBinCount);

        function listen(){
            analyser.getByteFrequencyData(data);
            let volume=data.reduce((a,b)=>a+b)/data.length;

            if(volume>40){
                document.querySelectorAll('.flame').forEach(f=>f.style.display='none');
                document.getElementById('note').style.display='block';
            }
            requestAnimationFrame(listen);
        }
        listen();
    });
}
</script>

</body>
</html>
